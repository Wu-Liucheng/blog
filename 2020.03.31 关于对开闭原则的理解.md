### 关于对开闭原则的理解与思考

开闭原则：

在面向对象编程领域中，**开闭原则**规定“*软件中的对象（类，模块，函数等等）应该对于扩展是开放的，但是对于修改是封闭的*”，这意味着一个实体是允许在不改变它的源代码的前提下变更它的行为。该特性在产品化的环境中是特别有价值的，在这种环境中，改变源代码需要代码审查，单元测试以及诸如此类的用以确保产品使用质量的过程。遵循这种原则的代码在扩展时并不发生改变，因此无需上述的过程。

以上来自于百度百科。

说一下事情的经过：

业务需求是在原来的数据库中新增加几个字段，已达到客户要求的新功能的目的，这张表对应的POJO类也就需要进行更新。这就引申出了上面那个问题。作为一个新手，我首先想到的是新建一个类，讲原来的类作为基类，再增加几个字段就行了，这就符合了上述的开闭原则：

```java
@Data
public class NewTaskDO extends TaskDO{
    private Integer unitRewardNum; 
    private String prodNumber;     
    private Integer orderAmountThreshold;  
    private Timestamp auctionStartTime; 
    private Timestamp auctionEndTime; 
}

```

接着，这个新的类对应的增删改查接口也同样需要新增，虽说根据里氏代换原则，`TaskDO task = new NewTaskDO`这种写法是一点问题都没有的，但是Spring框架底层创建对象用的是java的反射机制，所以那些controller层，service层，dao层的代码并不能复用，就需要增加新的关于`NewTaskDO`类的相关业务代码。

这仍遵循开闭原则。

然而今天leader说没有必要，直接在`TaskDO`里面新增那几个字段就行了。

我想了一会，确实。首先一张数据库表对应一个实体类，在坚持开闭原则的情形下，`TaskDO`并不能完全对应数据库中的表了。虽然直接更改实体类违背了开闭原则，但其余的代码都不需要改动。关键的一点，加入坚持开闭原则，关于这块业务的接口就会被分成新的接口与旧的接口，但接口的功能还都是一样的，这样就很没有意义，徒增了代码量。而无论是什么原则都是为了代码更加整洁，可复用之类的效果，很显然这次背道而驰了。

通过这件事，习得了一点经验，不说了，我去删代码了。