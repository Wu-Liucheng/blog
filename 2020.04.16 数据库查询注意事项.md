### 数据查询要注意的一个问题

🈶️一个需求，查询当天的订单数量，刚开始是这样写的sql条件：

```sql
date_format(responseAt,'%Y-%m-%d') = date_format(now(),'%Y-%m-%d')
```

其中responseAt是数据库中的字段，表示响应时刻，这样可以满足需求。

但这样性能很差，为了判断，需要计算左边的值与右边的值，但数据库中有很多行数据，这样左边就需要计算很多次。

没有阅读过mysql源码，所以不知道它会不会解方程，这样写是不行的。

```sql
responseAt >= str_to_date(DATE_FORMAT(NOW(),'%Y-%m-%d'),'%Y-%m-%d %H:%i:%s')
```

这样写就好了。

其实想来也简单，对于其他数据类型的字段，从来没写过类似于x+1=n这类的语句，因为对这种查询已经很熟悉了。而对于时间戳类型的函数用起来还是不熟，上面那条查询很慢的sql还是网上抄来的。熟能生巧吧。

